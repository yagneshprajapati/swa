<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enhanced Affirmations & Binaural Beats</title>
    <style>

        /* General Body Styling */
body {
    font-family: 'Arial', sans-serif;
    background: url('a.jpg') no-repeat center center fixed;
    background-size: cover;
    color: #1f3548;
    margin: 0;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
}

/* Header Styling */
.header h1 {
    font-size: 1.8em;
    color: #fff;
    text-align: center;
    margin-bottom: 20px;
    text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3);
}

/* Section Containers */
section {
    background: rgba(255, 255, 255, 0.8);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 20px;
    width: 90%;
    max-width: 400px;
    box-shadow: 0px 8px 20px rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(10px);
}

/* Input Fields */
textarea, select, input[type="number"] {
    width: 100%;
    padding: 12px;
    border: none;
    border-radius: 8px;
    margin-bottom: 12px;
    background-color: rgba(255, 255, 255, 0.6);
    color: #1f3548;
    font-size: 1em;
}

/* Buttons */
button {
    background-color: #5e9bb3;
    color: #ffffff;
    border: none;
    padding: 10px 20px;
    font-size: 1em;
    border-radius: 8px;
    cursor: pointer;
    margin-top: 8px;
    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.15);
    transition: all 0.3s ease;
}

button:hover {
    background-color: #488293;
    transform: translateY(-3px);
}

/* Affirmation List */
.affirmation-list {
    list-style: none;
    padding: 0;
    margin: 0;
    max-height: 200px;
    overflow-y: auto;
    scroll-behavior: smooth;
}

.affirmation-list li {
    background-color: rgba(120, 175, 208, 0.8);
    padding: 12px;
    margin-bottom: 8px;
    color: #fff;
    border-radius: 8px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

/* Loading Bar */
.loading-bar-container {
    width: 100%;
    background-color: rgba(120, 175, 208, 0.4);
    border-radius: 5px;
    overflow: hidden;
    display: none;
}

.loading-bar {
    height: 5px;
    background-color: #5e9bb3;
    width: 0;
}
</style>
</head>
<body>
    <!-- Header Section -->
    <header class="header">
        <h1>Enhanced Affirmations & Binaural Beats</h1>
    </header>

    <!-- Voice Selection Section -->
    <section class="voice-selection">
        <label for="apiSelect">Choose Voice API:</label>
        <select id="apiSelect" class="api-select" onchange="updateVoiceOptions()">
            <option value="browser">Browser SpeechSynthesis</option>
            <option value="mozilla">Mozilla TTS (free)</option>
        </select>

        <label for="voiceSelect">Choose Voice:</label>
        <select id="voiceSelect" class="voice-select"></select>
    </section>

    <!-- Affirmation Management Section -->
    <section class="affirmation-management">
        <textarea id="affirmationInput" class="affirmation-input" rows="2" placeholder="Type your affirmation here"></textarea>
        <button class="btn add-affirmation" onclick="addAffirmation()">Add Affirmation</button>

        <label>
            <input type="checkbox" id="subliminalEffect" class="subliminal-checkbox"> Subliminal Effect
        </label>
    </section>

    <!-- Affirmation List Section -->
    <section class="affirmation-list-section">
        <h3>Your Affirmations</h3>
        <ul id="affirmationList" class="affirmation-list"></ul>
        <button class="btn play-selected" onclick="playSelectedAffirmations()">Play Selected in Loop</button>
        <button class="btn play-pause" id="playPauseButton" onclick="togglePlayPause()">Play / Pause</button>
    </section>

    <!-- Import/Export Section -->
    <section class="import-export">
        <h3>Import/Export Affirmations</h3>
        <textarea id="importExportText" class="import-export-input" rows="2" placeholder="Paste or copy affirmations here"></textarea>
        <button class="btn import" onclick="importAffirmations()">Import</button>
        <button class="btn export" onclick="exportAffirmations()">Export</button>
    </section>

    <!-- Binaural Beats Section -->
    <section class="binaural-beats">
        <h3>Binaural Beats Settings</h3>
        <div class="frequency-controls">
            <label for="leftFreq">Left Frequency (Hz):</label>
            <select id="leftFreq" class="frequency-select">
                <option value="210">210 (Focus)</option>
                <option value="396">396 (Root - Stability)</option>
                <option value="528">528 (Solar - Self)</option>
                <option value="7.83">7.83 (Earth Frequency)</option>
                <option value="custom">Custom</option>
            </select>
            <input type="number" id="customLeftFreq" class="frequency-input" step="0.01" placeholder="Custom Hz" style="display: none;">
        </div>

        <div class="frequency-controls">
            <label for="rightFreq">Right Frequency (Hz):</label>
            <select id="rightFreq" class="frequency-select">
                <option value="396">396 (Root - Stability)</option>
                <option value="528">528 (Solar - Self)</option>
                <option value="7.83">7.83 (Earth Frequency)</option>
                <option value="custom">Custom</option>
            </select>
            <input type="number" id="customRightFreq" class="frequency-input" step="0.01" placeholder="Custom Hz" style="display: none;">
        </div>

        <button class="btn start-beats" onclick="startBinauralBeats()">Start Binaural Beats</button>
        <button class="btn stop-beats" onclick="stopBinauralBeats()">Stop Binaural Beats</button>
    </section>

    <!-- Loading Bar -->
    <div id="loadingBarContainer" class="loading-bar-container">
        <div id="loadingBar" class="loading-bar"></div>
    </div>

    <!-- JavaScript -->
    <script>
        // Global variables
let affirmations = [];
let playing = false;
let binauralAudioContext = null;
let oscillatorLeft = null;
let oscillatorRight;

// Populate voice options for selected API
function updateVoiceOptions() {
    const voiceSelect = document.getElementById('voiceSelect');
    const api = document.getElementById('apiSelect').value;

    voiceSelect.innerHTML = ''; // Clear existing options

    if (api === 'browser') {
        const voices = window.speechSynthesis.getVoices();
        voices.forEach(voice => {
            const option = document.createElement('option');
            option.value = voice.name;
            option.textContent = `${voice.name} (${voice.lang})`;
            voiceSelect.appendChild(option);
        });
    } else if (api === 'mozilla') {
        const mozillaVoices = ['Mozilla Voice 1', 'Mozilla Voice 2'];
        mozillaVoices.forEach(voice => {
            const option = document.createElement('option');
            option.value = voice;
            option.textContent = voice;
            voiceSelect.appendChild(option);
        });
    }
}

// Add affirmation to the list
function addAffirmation() {
    const input = document.getElementById('affirmationInput').value.trim();
    const list = document.getElementById('affirmationList');

    if (input) {
        affirmations.push(input);

        const li = document.createElement('li');
        li.textContent = input;

        const removeButton = document.createElement('button');
        removeButton.textContent = 'X';
        removeButton.onclick = () => {
            list.removeChild(li);
            affirmations = affirmations.filter(aff => aff !== input);
        };

        li.appendChild(removeButton);
        list.appendChild(li);
        document.getElementById('affirmationInput').value = '';
    }
}

// Play selected affirmations
function playSelectedAffirmations() {
    if (!affirmations.length) return alert('Add some affirmations first!');

    const api = document.getElementById('apiSelect').value;
    const voice = document.getElementById('voiceSelect').value;
    const subliminal = document.getElementById('subliminalEffect').checked;

    if (api === 'browser') {
        affirmations.forEach((affirmation, index) => {
            const utterance = new SpeechSynthesisUtterance(subliminal ? affirmation.toLowerCase() : affirmation);
            utterance.voice = window.speechSynthesis.getVoices().find(v => v.name === voice);
            utterance.rate = subliminal ? 1.5 : 1;

            setTimeout(() => window.speechSynthesis.speak(utterance), index * 3000);
        });
    } else {
        alert('Mozilla API support not implemented.');
    }
}

// Toggle play/pause
function togglePlayPause() {
    playing = !playing;
    if (playing) {
        playSelectedAffirmations();
    } else {
        window.speechSynthesis.cancel();
    }
}

// Export affirmations
function exportAffirmations() {
    const textArea = document.getElementById('importExportText');
    textArea.value = affirmations.join('\n');
}

// Import affirmations
function importAffirmations() {
    const textArea = document.getElementById('importExportText');
    const imported = textArea.value.split('\n').filter(line => line.trim());
    affirmations = affirmations.concat(imported);
    updateAffirmationList();
}

// Update affirmation list display
function updateAffirmationList() {
    const list = document.getElementById('affirmationList');
    list.innerHTML = '';

    affirmations.forEach(affirmation => {
        const li = document.createElement('li');
        li.textContent = affirmation;

        const removeButton = document.createElement('button');
        removeButton.textContent = 'X';
        removeButton.onclick = () => {
            list.removeChild(li);
            affirmations = affirmations.filter(aff => aff !== affirmation);
        };

        li.appendChild(removeButton);
        list.appendChild(li);
    });
}

// Start binaural beats
function startBinauralBeats() {
    if (binauralAudioContext) stopBinauralBeats();

    const leftFreq = document.getElementById('leftFreq').value === 'custom'
        ? parseFloat(document.getElementById('customLeftFreq').value)
        : parseFloat(document.getElementById('leftFreq').value);
    const rightFreq = document.getElementById('rightFreq').value === 'custom'
        ? parseFloat(document.getElementById('customRightFreq').value)
        : parseFloat(document.getElementById('rightFreq').value);

    if (!leftFreq || !rightFreq) return alert('Please specify valid frequencies.');

    binauralAudioContext = new (window.AudioContext || window.webkitAudioContext)();

    oscillatorLeft = binauralAudioContext.createOscillator();
    oscillatorLeft.frequency.value = leftFreq;

    oscillatorRight = binauralAudioContext.createOscillator();
    oscillatorRight.frequency.value = rightFreq;

    const leftGain = binauralAudioContext.createGain();
    const rightGain = binauralAudioContext.createGain();

    oscillatorLeft.connect(leftGain).connect(binauralAudioContext.destination);
    oscillatorRight.connect(rightGain).connect(binauralAudioContext.destination);

    oscillatorLeft.start();
    oscillatorRight.start();
}

// Stop binaural beats
function stopBinauralBeats() {
    if (oscillatorLeft) oscillatorLeft.stop();
    if (oscillatorRight) oscillatorRight.stop();
    if (binauralAudioContext) binauralAudioContext.close();

    binauralAudioContext = null;
    oscillatorLeft = null;
    oscillatorRight = null;
}

// Event listeners for custom frequency input
document.getElementById('leftFreq').addEventListener('change', function () {
    document.getElementById('customLeftFreq').style.display = this.value === 'custom' ? 'block' : 'none';
});
document.getElementById('rightFreq').addEventListener('change', function () {
    document.getElementById('customRightFreq').style.display = this.value === 'custom' ? 'block' : 'none';
});

// Populate initial voice options
window.speechSynthesis.onvoiceschanged = updateVoiceOptions;

    </script>
</body>
</html>
